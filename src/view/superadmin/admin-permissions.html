<html>
	<head>
		<title>Admin - Permissions</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		
		<link rel="stylesheet" href="../assets/css/bootstrap.min.css">
		<link rel="stylesheet" href="../assets/css/style.css">
		<link rel="stylesheet" href="../assets/css/sidebar-test.css">
		<link rel="stylesheet" href="../assets/css/button.css">
		<link rel="stylesheet" href="../assets/css/jquery.tokenize.css">
		<link rel="stylesheet" href="../assets/css/bootstrap-datepicker.min.css">
		<link rel="stylesheet" href="../assets/css/style-admin.css">
		
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Raleway">
		<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Montserrat">
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="../assets/js/bootstrap.min.js"></script>
		<script src="../assets/js/nice-scroll.js"></script>
		<script src="../assets/js/button.js"></script>
		<script src="../assets/js/main.js"></script>
		<script src="../assets/js/jquery.tokenize.js"></script>
		<script src="../assets/js/bootstrap-datepicker.min.js"></script>
		
		
		<script>
		
		$(document).ready(function() {
			
			
		
			$("#submit_permissions").click(function(e) {
				$.post( "/superadmin/permissions", $("#edit_permissions").serialize())
		  		.done(function( data ) {
		  			if (data!="true"){
		  				alert("Something Went Wrong");
		  				return false
		  			} else {
		  				
		  				location.reload();
		  			}
		  		});
			});
		/*********** Show Modals *****************/
			
			$(".add-user-btn").click(function(e) {
				$('#add-user-modal').modal('show');
			});
			/*$(".add-permission-btn").click(function(e) {
				//$('#add-permission-modal').modal('show');
				$('#add-permission-modal').modal({
			        remote: '/admin/addpermissions',
			        show:true
			});
			});
			
			$('#add-permission-modal').modal({
		        show: false,
		        remote: 'admin/addpermissions'
		});
			$(".add-permission-btn").on('click', function () {
		        $('#add-permission-modal').removeData('bs.modal');
		        $('#add-permission-modal').modal({remote: 'admin/addpermissions' });
		        $('#add-permission-modal').modal('show');
			});
			$(".add-role-btn").click(function(e) {
				$('#add-role-modal').modal('show');
			});
			$(".permission-link").click(function(e) {
				$('#edit-permission-modal').modal('show');
			});
			
			$(".roll-link").click(function(e) {
				$('#edit-role-modal').modal('show');
			});*/
			
		/*********** Show Modals ENDs *****************/	
			
			$("#menu-toggle").click(function(e) {
				e.preventDefault();
				$("#wrapper").toggleClass("toggled");
			});
			
			/******** For Hamburger & Close icon *****/
				
			$('#ham-side-icon').show();	
			
			$( "#menu-toggle" ).click(function() {
				var toggle = $( "#wrapper" ).hasClass("toggled");
					
						if(toggle == true){
							$('#close-side-icon').show();
							$('#ham-side-icon').hide();
							
						} else {
							$('#close-side-icon').hide();
							$('#ham-side-icon').show();
						}
				
			});
			/******** For Hamburger & Close icon ends *****/
			
			
			
			if($( window ).width() >= 768) {
				$( "#menu-toggle" ).click(function() {
						var a = $( "#wrapper" ).hasClass("toggled");
					
						if(a == true){
							
							$('#sidebar-wrapper').css('width','250px');
							$('#sidebar-wrapper').css('left','250px');
							$('#wrapper.toggled').css('padding-left','250px');
							
						} else {
							$('#sidebar-wrapper').css('width','0px');
							$('#sidebar-wrapper').css('left','0px');
							$('#wrapper').css('padding-left','0px');
							
						}
						
				});
			}
			
			if($( window ).width() <= 767) {
				$( "#menu-toggle" ).click(function() {
						var a = $( "#wrapper" ).hasClass("toggled");
						
						if(a == true){
							  
							
							$('#sidebar-wrapper').css('width','250px');
							$('#sidebar-wrapper').css('left','250px');
							$('#wrapper.toggled').css('padding-left','250px');
							
						} else {
							$('#sidebar-wrapper').css('width','0px');
							$('#sidebar-wrapper').css('left','0px');
							$('#wrapper').css('padding-left','0px');
							
						}
						
				});
			}
		
		});
		
		</script>
	
	
	</head>
	
	<body>
		<div id="wrapper">
	
		{% include "sidebar.html" %} 
		
	<!-- Page Content -->
       <div id="page-content-wrapper">
		
						<!-- For mobile user menu starts -->
						<ul class="nav-mobile">
									
									  <li class="dropdown">
										<a href="#" class="dropdown-toggle user-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
										<img src="../assets/img/user.png">
										<span class="caret"></span></a>
										<ul class="dropdown-menu menu-user menu-responsive">
										  <li><a href="#"><i class="fa fa-user"></i> Profile</a></li>
										  <li class="dropdown-submenu">
													
													<a href="#"><i class="fa fa-caret-left arrow-left"></i><i class="fa fa-cog"></i> Settings</a>
													<ul class="dropdown-menu submenu-list">
													  <li><a href="#"><i class="fa fa-bell"></i> Notifications</a></li>
													  <li><a href="#"><i class="fa fa-link"></i> Linked Accounts</a></li>
													  <li><a href="#"><i class="fa fa-trash"></i> Clear History</a></li>
													  <li><a href="#"><i class="fa fa-share-square"></i> Share Query</a></li>
													  <li><a href="#"><i class="fa fa-certificate"></i> Assistance</a></li>
													</ul>
										  </li>
										  <li class="dropdown-submenu">
													
													<a href="#"><i class="fa fa-caret-left arrow-left"></i><i class="fa fa-comments"></i> Chats</a>
													<ul class="dropdown-menu submenu-list">
													  <li><a href="#"><i class="fa fa-comment"></i> Recent Chat</a></li>
													  <li><a href="#"><i class="fa fa-users"></i> Group Chat</a></li>
													  <li><a href="#"><i class="fa fa-black-tie"></i> Client Chat</a></li>
													</ul>
										  </li>
										  
										  <li><a href="#"><i class="fa fa-question-circle"></i> Help</a></li>
										  <li role="separator" class="divider"></li>
										  <li><a href="#"><i class="fa fa-sign-out"></i> Logout</a></li>
										</ul>
									  </li>
						</ul>
						<!-- For mobile user menu Ends -->
						
						
						<section class="top-main-section">
							 <!-- Static navbar -->
							  <nav class="navbar navbar-default navbar-pro-management">
								<div class="container-fluid">
								  <div class="navbar-header">
									<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
									  <span class="sr-only">Toggle navigation</span>
									  <span class="icon-bar"></span>
									  <span class="icon-bar"></span>
									  <span class="icon-bar"></span>
									</button>
									<a class="navbar-brand" href="#">
										
										<img src="../assets/img/eternus.png" class="logo-img">
									</a>
								  </div>
								  <div id="navbar" class="navbar-collapse collapse">
									<ul class="nav navbar-nav">
									  
									  <li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
										<i class="fa fa-credit-card"></i> SALES
										<span class="caret"></span></a>
										<ul class="dropdown-menu">
										  <li><a href="#"><i class="fa fa-cogs"></i> Sales 1</a></li>
										  <li><a href="#"><i class="fa fa-cogs"></i> Sales 2</a></li>
										  <li><a href="#"><i class="fa fa-cogs"></i> Sales 3</a></li>
										</ul>
									  </li>
									  
									  <li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
										<i class="fa fa-share-alt"></i> SOCIAL MEDIA
										<span class="caret"></span></a>
										<ul class="dropdown-menu">
										  <li><a href="#"><i class="fa fa-facebook-official"></i> Facebook</a></li>
										  <li><a href="#"><i class="fa fa-twitter"></i> Twitter</a></li>
										  <li><a href="#"><i class="fa fa-instagram"></i> Instagram</a></li>
										</ul>
									  </li>
									  
									  
									  <li class="dropdown">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
										<i class="fa fa-sticky-note"></i> PROJECTS
										<span class="caret"></span></a>
										<ul class="dropdown-menu">
										  <li><a href="#"><i class="fa fa-cog"></i> Project 1</a></li>
										  <li><a href="#"><i class="fa fa-cog"></i> Project 2</a></li>
										  <li><a href="#"><i class="fa fa-cog"></i> Project 3</a></li>
										</ul>
									  </li>
									</ul>
									
									
									<ul class="nav navbar-nav navbar-right nav-desktop">
									 
									  <!--<li class="search-field-box"><i class="fa fa-search search-icon"></i><input type="text" class="form-control search-field project-management-textbox" placeholder="Search..."></li>-->
									 
 									  <li class="dropdown">
										<a href="#" class="dropdown-toggle user-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
										
										<img src="../assets/img/user.png">
										
										<span class="caret"></span></a>
										
										<ul class="dropdown-menu multi-level menu-user">
										  <li><a href="#"><i class="fa fa-user"></i> Profile</a></li>
									      <li class="dropdown-submenu">
													<a href="#"><i class="fa fa-caret-left arrow-left"></i><i class="fa fa-cog"></i> Settings</a>
													<ul class="dropdown-menu submenu-list">
													  <li><a href="#"><i class="fa fa-bell"></i> Notifications</a></li>
													  <li><a href="#"><i class="fa fa-link"></i> Linked Accounts</a></li>
													  <li><a href="#"><i class="fa fa-trash"></i> Clear History</a></li>
													  <li><a href="#"><i class="fa fa-share-square"></i> Share Query</a></li>
													  <li><a href="#"><i class="fa fa-certificate"></i> Assistance</a></li>
													</ul>
										  </li>
										  <li class="dropdown-submenu">
													<a href="#"><i class="fa fa-caret-left arrow-left"></i><i class="fa fa-comments"></i> Chats</a>
													<ul class="dropdown-menu submenu-list">
													  <li><a href="#"><i class="fa fa-comment"></i> Recent Chat</a></li>
													  <li><a href="#"><i class="fa fa-users"></i> Group Chat</a></li>
													  <li><a href="#"><i class="fa fa-black-tie"></i> Client Chat</a></li>
													</ul>
										  </li>
										  <li><a href="#"><i class="fa fa-question-circle"></i> Help</a></li>
										  <li role="separator" class="divider"></li>
										  <li><a href="#"><i class="fa fa-sign-out"></i> Logout</a></li>
										</ul>
									  </li>
									</ul>
								  </div><!--/.nav-collapse -->
								</div><!--/.container-fluid -->
							  </nav>

						</section>	
						
						
					
						<!-- Main Page content starts -->	
						
						<div class="main-box">
							<div class="col-md-12">
							
								<div class="user-management-heading-box">
								
									<!-- Menu Toggle Button -->
									<div id="menu-toggle" class="menu-toggle-user-management">
										<img src="../assets/img/ham-side-icon.png" id="ham-side-icon">
										<img src="../assets/img/close-side-icon.png" id="close-side-icon" style="display:none;">
									</div>
									<!-- Menu Toggle Button -->
									
									<h2 class="user-management-heading"><i class="fa fa-cog user-management-head-icon"></i>Permissions</h2>
									<a href="/superadmin/addrole" data-toggle="modal" data-target="#add-role-modal">
									<button class="add-role-btn pro-button">Add Role</button>
									</a>
									<a href="/superadmin/addpermission" data-toggle="modal" data-target="#add-permission-modal">
									<button class="add-permission-btn pro-button">Add Permission</button>
									</a>
								</div>
								
							
								<!-- Admin permissions table starts -->
								<div class="permissions-container" id="permissions_container">
							
									<div class="col-md-12 permission-box">
										<div class="panel panel-default login-panel">
											
											<div class="panel-body login-panel-body">
												<div class="table-responsive">
												<form id="edit_permissions" > 
														<table class="table permission-table table-striped">
															<thead>
															  <tr>	
																<th></th>
																{% for role in role %}
																<th><a href="/superadmin/editrole?key={{role.key.urlsafe}}" class="roll-link" data-toggle="modal" data-target="#edit-role-modal">{{role.role}}</a></th>
																{% endfor %}
															  </tr>
															</thead>
															<tbody>
															  <tr>
																<td>
																	<a href="#" class="permission-link">All</a>
																</td>
																{% for role in role %}
																<td><input type="checkbox" id="checkbox12" class="css-checkbox sme" value="{{role.key.urlsafe}}<!>All" name="permissions"/>
																	<label for="checkbox12" name="checkbox69_lbl" class="css-label sme depressed"></label>
																</td>
																{% endfor %}
																
															  </tr>	
															  {% for perm in perm %}
															  <tr>
																<td>
																	<a href="/superadmin/editpermission?key={{perm.key.urlsafe}}" class="permission-link" data-toggle="modal" data-target="#edit-permission-modal">{{perm.permission}} ({{perm.url}})</a>
																</td>
																{% for role in role %}
																<td>
																{% if perm.key in role.permissions%}
																<input type="checkbox" id="checkbox22" class="css-checkbox sme" value="{{role.key.urlsafe}}<!>{{perm.key.urlsafe}}" checked name="permissions"/>
																
																{% else %}
																<input type="checkbox" id="checkbox22" class="css-checkbox sme" value="{{role.key.urlsafe}}<!>{{perm.key.urlsafe}}" name="permissions"/>
																{%endif%}
																<label for="checkbox22" name="checkbox69_lbl" class="css-label sme depressed"></label>
																</td>
																{% endfor %}
													  </tr>	
													  {% endfor %}
															 
															</tbody>
														</table>
												</div>
												</form>
												<div class="update-permission-box">
													<button class="update-permission-btn pro-button" id="submit_permissions">Submit</button>
												</div>
												
												
											</div> <!-- .login-panel-body ENDS -->
										</div> <!-- .login-panel ENDS -->
									</div> <!-- .col-md-10 ENDS -->
							
								</div>	
							<!-- Admin permissions table ENDS -->
								
							</div>
							
						</div>
						
						<!-- Main Page content ENDS -->	
					
		</div> <!-- Page content Wrapper ends -->		
	</div> <!-- Wrapper ends -->	
	
	
	<!-- Add Permission Modal Starts -->
			<div id="add-permission-modal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
			  <div class="modal-dialog">
				<div class="modal-content add-task-modal-content" id="add_permission">
				
				
				</div>
				<!-- Modal content-->
				<!-- <div class="modal-content add-task-modal-content">
				  <div class="modal-header add-task-modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title add-task-modal-heading">Add Permission</h4>
				  </div>
					<div class="modal-body user-management-body">
							<div class="row">
								<div class="col-md-1">
								</div>
								
								<div class="col-md-10">
										<form role="form">
											  <!-- Permission Name 
											  <div class="form-group task-form-group">
												<label class="task-label">Permission Name</label>
												<input type="text" class="form-control add-task-textbox">
											  </div>
											  
											  <!-- Permission URL 
											  <div class="form-group task-form-group">
												<label class="task-label">Permission URL</label>
												<input type="text" class="form-control add-task-textbox">
											  </div>
											
										</form>
								</div>	
								<div class="col-md-1">
								</div>		
							</div>
							
				  </div> -
				  <div class="modal-footer add-task-modal-footer">
					<button type="button" class="add-task-btn-modal" data-dismiss="modal">Add</button>
					<a href="#" class="cancel-task-btn-modal" data-dismiss="modal">Cancel</a>
				  </div>
				</div>
-->
			  </div>
			</div>
	<!-- Add Permission Modal Ends -->
	
	
	<!-- Edit Permission Modal Starts -->
			<div id="edit-permission-modal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
			  <div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content add-task-modal-content">
				 
				</div>

			  </div>
			</div>
	<!-- Edit Permission Modal Ends -->
	
	
	
	<!-- Add Role Modal Starts -->
			<div id="add-role-modal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
			  <div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content add-task-modal-content">
				  
				</div>

			  </div>
			</div>
	<!-- Add Role Modal Ends -->
	
	<!-- Edit Role Modal Starts -->
			<div id="edit-role-modal" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
			  <div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content add-task-modal-content">
				  
				</div>

			  </div>
			</div>
	<!-- Edit Role Modal Ends -->

	</body>
</html>